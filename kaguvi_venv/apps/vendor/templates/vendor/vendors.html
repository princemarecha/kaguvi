{%extends 'core/base.html'%}
{%block title%}Vendors | {%endblock%}
{%block content%}

<h1> Vendors </h1>

    <div>
        {% for vendor in vendors %}
            <div>
                <div>
                    <h2 style="color: green;">{{ vendor.name }}</h2>
                </div>
                <hr>
                <a href="{% url 'vendor' vendor.id %}" class = "btn btn-primary">VIEW</a>
            </div>
        {% endfor %}


    </div>

<script type='text/javascript'>
        function GetMap() {
            var map = new Microsoft.Maps.Map('#myMap', {
                credentials: 'AjGsza8NB2YlYtJxm134DKtF90wtDwjxIOnOPApDdCmsY9Ot9QRoRXskTNseqa3y',
                center: new Microsoft.Maps.Location(-17.8287335393263, 31.048260006526803)
            });

            {% for vendor in vendors %}
                 center3 = new Microsoft.Maps.Location({{vendor.vendorprofile.latitude}}, {{vendor.vendorprofile.longitude}});

                   //Create custom Pushpin
            var pin3 = new Microsoft.Maps.Pushpin(center3, {
                color: '{{vendor.vendorprofile.color}}',
                title: '{{vendor.vendorprofile.title}}',
                subTitle: '{{vendor.vendorprofile.subTitle}}',

            });

            //Add the pushpin to the map
            map.entities.push(pin3);

            {% endfor %}


        }
    </script>
<script type='text/javascript' src='http://www.bing.com/api/maps/mapcontrol?callback=GetMap' async defer></script>

<div id="myMap" style="position:relative;width:600px;height:400px;"></div>
{% endblock %}
